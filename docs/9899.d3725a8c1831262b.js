"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9899],{9899:(Y,g,n)=>{n.r(g),n.d(g,{ListProductsPageModule:()=>M});var a,p=n(6814),C=n(6223),e=n(1929),P=n(8476),y=n(5861),L=n(7582),h=n(186),T=n(7394),f=n(9779),m=n(798),t=n(9212),v=n(5472),d=n(9515);function Z(s,o){if(1&s){const r=t.EpF();t.TgZ(0,"ion-col",3)(1,"ion-card",4),t.NdJ("click",function(){const u=t.CHM(r).$implicit,J=t.oxw();return t.KtG(J.goToProduct(u))}),t._UZ(2,"ion-img",5),t.TgZ(3,"ion-card-header")(4,"ion-card-title"),t._uU(5),t.ALo(6,"translate"),t.qZA()()()()}if(2&s){const r=o.$implicit;t.xp6(2),t.Q6J("src","assets/img/products/"+r.img),t.xp6(3),t.Oqu(t.lcZ(6,2,r.name))}}class l{constructor(o,r,i,c,u){this.navController=o,this.navParams=r,this.store=i,this.loadingController=c,this.translate=u,this.idCategory="",this.products=[],this.products=[]}ionViewWillEnter(){var o=this;return(0,y.Z)(function*(){if(o.subscription=new T.w0,o.idCategory=o.navParams.data.idCategory,o.idCategory){const r=yield o.loadingController.create({message:"Cargando...",duration:500});r.present(),o.store.dispatch(new f.B({idCategory:o.idCategory}));const i=o.products$.subscribe({next:()=>{o.products=o.store.selectSnapshot(m.k.products)},error:c=>{console.error(c)},complete:()=>{r.dismiss()}});o.subscription.add(i)}else o.navController.navigateForward("categories")})()}ionViewWillLeave(){console.log("Eliminado subscripciones"),this.subscription.unsubscribe()}goToProduct(o){this.navParams.data.product=o,this.navController.navigateForward("product")}refreshProducts(o){this.store.dispatch(new f.B({idCategory:this.idCategory})),o.target.complete()}}(a=l).\u0275fac=function(o){return new(o||a)(t.Y36(v.SH),t.Y36(v.X1),t.Y36(h.yh),t.Y36(e.HT),t.Y36(d.sK))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-list-products"]],decls:6,vars:2,consts:[[1,"fondo",3,"fullscreen"],["slot","fixed",3,"ionRefresh"],["size","6",4,"ngFor","ngForOf"],["size","6"],[1,"list","ion-text-center",3,"click"],[3,"src"]],template:function(o,r){1&o&&(t.TgZ(0,"ion-content",0)(1,"ion-refresher",1),t.NdJ("ionRefresh",function(c){return r.refreshProducts(c)}),t._UZ(2,"ion-refresher-content"),t.qZA(),t.TgZ(3,"ion-grid")(4,"ion-row"),t.YNc(5,Z,7,4,"ion-col",2),t.qZA()()()),2&o&&(t.Q6J("fullscreen",!0),t.xp6(5),t.Q6J("ngForOf",r.products))},dependencies:[p.sg,e.PM,e.Zi,e.Dq,e.wI,e.W2,e.jY,e.Xz,e.nJ,e.Wo,e.Nd,d.X$]}),(0,L.gn)([(0,h.Ph)(m.k.products)],l.prototype,"products$",void 0);const x=[{path:"",component:l}];let F=(()=>{var s;class o{}return(s=o).\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[P.Bz.forChild(x),P.Bz]}),o})(),M=(()=>{var s;class o{}return(s=o).\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[p.ez,C.u5,e.Pc,F,d.aw.forChild()]}),o})()}}]);